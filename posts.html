<!DOCTYPE html>
<html>
    <head>
        <title>datawerk</title>
        <meta charset="utf-8" />
        <link href="https://synergenz.github.io/theme/css/bootstrap-custom.css" rel="stylesheet"/> 
    	<link href="https://synergenz.github.io/theme/css/pygments.css" rel="stylesheet"/>     
        <link href="https://synergenz.github.io/theme/css/style.css" rel="stylesheet" />
        <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56071357-1', 'auto');
  ga('send', 'pageview');

</script>    </head>

    <body>
    <div class="wrap">
        <div class="container-fluid">
            <div class="header">
                <div class="container">
                    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
                        <div class="navbar-header">
                            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
                                <span class="sr-only">Toggle navigation</span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                            </button>
                            <a class="navbar-brand" href="https://synergenz.github.io"><span class="fa fa-pie-chart navbar-logo"></span> datawerk</a>
                        </div>
                        <div class="navbar-collapse collapse">
                            <ul class="nav navbar-nav">
                                <!--<li><a href="https://synergenz.github.io/archives.html">Archives</a></li>-->
                                <li><a href="https://synergenz.github.io/posts.html">Blog</a></li>
                                <li><a href="https://synergenz.github.io/pages/cv.html">Interactive CV</a></li>
                                <li class="dropdown">                                    
                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Data Reports<span class="caret"></span></a>
                                    <ul class="dropdown-menu" role="menu">
                                        <!--<li class="divider"></li>
                                        <li class="dropdown-header">Data Science Reports</li>-->
                                        <li >
                                        <a href="https://synergenz.github.io/activity-data.html">Categorisation of inertial activity&nbsp;data</a>
                                        </li>
                                        <li >
                                        <a href="https://synergenz.github.io/p2p-loans.html">Interest rates on <span class="caps">P2P</span>&nbsp;loans</a>
                                        </li>
                                        <li >
                                        <a href="https://synergenz.github.io/titanic-survival.html">Titanic survival&nbsp;prediction</a>
                                        </li>
                                    </ul>
                                </li>
                                <li class="dropdown">                                    
                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Data Apps<span class="caret"></span></a>
                                    <ul class="dropdown-menu" role="menu">
                                        <!--<li class="divider"></li>
                                        <li class="dropdown-header">Data Science Reports</li>-->
                                        <li >
                                        <a href="https://synergenz.github.io/elegans.html">C. elegans connectome&nbsp;explorer</a>
                                        </li>
                                        <li >
                                        <a href="https://synergenz.github.io/dash+.html">Dash+ visualization of running&nbsp;data</a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </nav>
                </div>
            </div><!-- header -->
        </div><!-- container-fluid -->

        <div class="container main-content">     
            <div class="row row-centered">
                <div class="col-centered col-max col-min col-sm-12 col-md-10 col-lg-10 main-content">
<section id="content" class="content">

<article class="hentry">
    <header> 
        <span class="entry-title-info">Feb 02 · <a href="https://synergenz.github.io/category/data-posts.html">Data Posts</a></span>
        <h2 class="entry-title entry-title-tight"><a href="https://synergenz.github.io/xql.html" rel="bookmark" title="Permalink to Sql to excel">Sql to&nbsp;excel</a></h2> 
    </header>
    <div class="entry-content"> <p>A little python tool to execute an sql script (postgresql in this case, but should be easily modifiable for mysql etc.) and store the result in a csv or excel (xls file):</p>
<div class="highlight"><pre><span class="sd">"""</span>
<span class="sd">Executes an sql script and stores the result in a file.</span>
<span class="sd">"""</span>

<span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">from</span> <span class="nn">xlwt</span> <span class="kn">import</span> <span class="n">Workbook</span>


<span class="k">def</span> <span class="nf">sql_to_csv</span><span class="p">(</span><span class="n">sql_fnm</span><span class="p">,</span> <span class="n">csv_fnm</span><span class="p">):</span>
    <span class="sd">""" Write result of executing sql script to txt file"""</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">sql_fnm</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span> <span class="k">as</span> <span class="n">sql_file</span><span class="p">:</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">sql_file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">query</span> <span class="o">=</span> <span class="s">"COPY ("</span> <span class="o">+</span> <span class="n">query</span> <span class="o">+</span> <span class="s">") TO STDOUT WITH CSV HEADER"</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="s">'psql -c "'</span> <span class="o">+</span> <span class="n">query</span> <span class="o">+</span> <span class="s">'"'</span>
        <span class="k">print</span> <span class="n">cmd</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">check_output</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">csv_fnm</span><span class="p">,</span> <span class="s">'wb ...</span></pre></div> </div><!-- entry-content -->
</article>
<article class="hentry">
    <header> 
        <span class="entry-title-info">Jan 27 · <a href="https://synergenz.github.io/category/data-posts.html">Data Posts</a></span>
        <h2 class="entry-title entry-title-tight"><a href="https://synergenz.github.io/scholar.html" rel="bookmark" title="Permalink to Retrieving your Google Scholar data">Retrieving your Google Scholar&nbsp;data</a></h2> 
    </header>
    <div class="entry-content"> <p>For my interactive <span class="caps">CV</span> I decided to try not only to automate the creation of a bibliography of my publications, but also to extend it with a citation count for each paper, which Google Scholar happens to keep track of. Unfortunately there is no Scholar <span class="caps">API</span>. But I figured since my own profile is based on data I essentially donated to Google, it is only fair that I can have access to it too. Hence I wrote a little scraper that iterates over the publications in my Scholar profile, extracts all citations, and bins them per year. That way I ...</p> </div><!-- entry-content -->
</article>
<article class="hentry">
    <header> 
        <span class="entry-title-info">Jan 27 · <a href="https://synergenz.github.io/category/data-posts.html">Data Posts</a></span>
        <h2 class="entry-title entry-title-tight"><a href="https://synergenz.github.io/tag-graph.html" rel="bookmark" title="Permalink to Tag graph plugin for Pelican">Tag graph plugin for&nbsp;Pelican</a></h2> 
    </header>
    <div class="entry-content"> <p>On my front page I display a sort of sitemap for my blog. Since the structure of the site is not very hierarchical, I decided to show pages and posts as a graph along with their tags. To do so, I created a mini plugin for the Pelican static blog engine. The plugin is essentially a sort of callback that gets executed when the engine has generated all posts and pages from their markdown files. I then simply take the results and write them out in a json format that d3.js understands (a list of nodes and a list ...</p> </div><!-- entry-content -->
</article>
<article class="hentry">
    <header> 
        <span class="entry-title-info">Jan 15 · <a href="https://synergenz.github.io/category/data-apps.html">Data Apps</a></span>
        <h2 class="entry-title entry-title-tight"><a href="https://synergenz.github.io/elegans.html" rel="bookmark" title="Permalink to C. elegans connectome explorer">C. elegans connectome&nbsp;explorer</a></h2> 
    </header>
    <div class="entry-content"> <p>I’ve build a prototype <a href="https://elegans.herokuapp.com">visual exploration tool</a> for the connectome of c. elegans. The data describing the worm’s neural network is preprocessed from publicly available information and stored as a graph database in neo4j. The d3.js visualization then fetches either the whole network or a subgraph and displays it using a force-directed layout (for now).</p>
<figure>
<a href="https://elegans.herokuapp.com"></a>
</figure> </div><!-- entry-content -->
</article>
<article class="hentry">
    <header> 
        <span class="entry-title-info">Nov 13 · <a href="https://synergenz.github.io/category/reports.html">Reports</a></span>
        <h2 class="entry-title entry-title-tight"><a href="https://synergenz.github.io/activity-data.html" rel="bookmark" title="Permalink to Categorisation of inertial activity data">Categorisation of inertial activity&nbsp;data</a></h2> 
    </header>
    <div class="entry-content"> <p>The ubiquity of mobile phones equipped with a wide range of sensors presents interesting opportunities for data mining applications. In this report we aim to find out whether data from accelerometers and gyroscopes can be used to identify physical activities performed by subjects wearing mobile phones on their wrist.</p>
<p></p>
<h3>Methods</h3>
<p>The data used in this analysis is based on the “Human activity recognition using smartphones” data set available from the <span class="caps">UCL</span> Machine Learning Repository [1]. A preprocessed version was downloaded from the Data Analysis online course [2]. The set contains data derived from 3-axial linear acceleration and 3-axial angular velocity ...</p> </div><!-- entry-content -->
</article>
<article class="hentry">
    <header> 
        <span class="entry-title-info">Nov 13 · <a href="https://synergenz.github.io/category/academia.html">Academia</a></span>
        <h2 class="entry-title entry-title-tight"><a href="https://synergenz.github.io/spinal-coordination.html" rel="bookmark" title="Permalink to Movement control without internal models">Movement control without internal&nbsp;models</a></h2> 
    </header>
    <div class="entry-content"> <p>My latest paper has just been published by Frontiers in Computational Neuroscience and can be accessed free of charge <a href="http://journal.frontiersin.org/Journal/10.3389/fncom.2014.00144/abstract">here</a>. It concerns the question of whether we need internal models (simulations) in order to control our movements, or whether our body and the lower-level neural circuits innervating it provide some control “for free”.</p>
<p>From the abstract:</p>
<blockquote>
The dynamic interaction of limb segments during movements that involve multiple joints creates torques in one joint due to motion about another. Evidence shows that such interaction torques are taken into account during the planning or control of movement in humans. Two alternative hypotheses ...</blockquote> </div><!-- entry-content -->
</article>
<article class="hentry">
    <header> 
        <span class="entry-title-info">Nov 06 · <a href="https://synergenz.github.io/category/reports.html">Reports</a></span>
        <h2 class="entry-title entry-title-tight"><a href="https://synergenz.github.io/p2p-loans.html" rel="bookmark" title="Permalink to Interest rates on P2P loans">Interest rates on <span class="caps">P2P</span>&nbsp;loans</a></h2> 
    </header>
    <div class="entry-content"> <p>Like other peer-to-peer services, the <a href="https://www.lendingclub.com/home.action">Lending Club</a> aims to directly connect producers and consumers, or in this case borrowers and lenders, by cutting out the middleman. Borrowers apply for loans online and provide details about the desired loan as well their financial status (such as <span class="caps">FICO</span> score). Lenders use the information provided to choose which loans to invest in. The Lending Club, finally, uses a <a href="https://www.lendingclub.com/public/how-we-set-interest-rates.action">proprietary algorithm</a> to determine the interest charged on an applicant’s loan. Given the secret nature of this process, a borrower or lender might be interested in which variables, beside the obvious <span class="caps">FICO</span> credit score ...</p> </div><!-- entry-content -->
</article>
<article class="hentry">
    <header> 
        <span class="entry-title-info">Oct 29 · <a href="https://synergenz.github.io/category/data-apps.html">Data Apps</a></span>
        <h2 class="entry-title entry-title-tight"><a href="https://synergenz.github.io/dash+.html" rel="bookmark" title="Permalink to Dash+ visualization of running data">Dash+ visualization of running&nbsp;data</a></h2> 
    </header>
    <div class="entry-content"> <p><a href="http://dashplus.herokuapp.com/">Dash+</a> is a python web application I built with <a href="http://flask.pocoo.org/">Flask</a>, which imports Nike+ running data into a NoSQL database (MongoDB) and uses <a href="http://d3js.org/">D3.js</a> to visualize and analyze it. </p>
<p>The app is work in progress and primarily intended as a personal playground for exploring d3 visualization of my own running data. Having said that, if you want to fork your own version on <a href="https://github.com/synergenz/dash">github</a>, simply add your Nike access token in the corresponding file.</p>
<figure>
<a href="http://dashplus.herokuapp.com"></a>
</figure> </div><!-- entry-content -->
</article>
<article class="hentry">
    <header> 
        <span class="entry-title-info">Oct 29 · <a href="https://synergenz.github.io/category/data-posts.html">Data Posts</a></span>
        <h2 class="entry-title entry-title-tight"><a href="https://synergenz.github.io/hadoop-distributed-cache.html" rel="bookmark" title="Permalink to Reading from distributed cache in Hadoop">Reading from distributed cache in&nbsp;Hadoop</a></h2> 
    </header>
    <div class="entry-content"> <p>The distributed cache can be used to make small files (or jars etc.) available to mapreduce functions locally on each node. This can be useful e.g. when a global stopword list is needed by all mappers for index creation.  Here are two correct ways of reading a file from distributed cache in Hadoop 2. This has changed in the new <span class="caps">API</span> and very few books and tutorials have updated examples.</p>
<h3>Named File</h3>
<p>In the driver:</p>
<div class="highlight"><pre><span class="n">Job</span> <span class="n">job</span> <span class="o">=</span> <span class="n">Job</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="k">new</span> <span class="n">Configuration</span><span class="o">());</span>
<span class="n">job</span><span class="o">.</span><span class="na">addCacheFile</span><span class="o">(</span><span class="k">new</span> <span class="n">URI</span> <span class="o">(</span><span class="s">"/path/to/file.csv"</span> <span class="o">+</span> <span class="s">"#filelabel"</span><span class="o">));</span>
</pre></div>
<p>In the mapper:</p>
<div class="highlight"><pre><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setup</span><span class="o">(</span><span class="n">Context</span> <span class="n">context ...</span></pre></div> </div><!-- entry-content -->
</article>
<article class="hentry">
    <header> 
        <span class="entry-title-info">Oct 23 · <a href="https://synergenz.github.io/category/reports.html">Reports</a></span>
        <h2 class="entry-title entry-title-tight"><a href="https://synergenz.github.io/titanic-survival.html" rel="bookmark" title="Permalink to Titanic survival prediction">Titanic survival&nbsp;prediction</a></h2> 
    </header>
    <div class="entry-content"> <p>In this report I will provide an overview of my solution to <a href="http://www.kaggle.com">kaggle’s</a> <a href="https://www.kaggle.com/c/titanic-gettingStarted">“Titanic” competition</a>. The aim of this competition is to predict the survival of passengers aboard the titanic using information such as a passenger’s gender, age or socio-economic  status. I will explain my data munging process, explore the available predictor variables, and compare a number of different classification algorithms in terms of their prediction performance. All analysis presented here was performed in R. The corresponding source code is available on <a href="https://github.com/synergenz/kaggle/tree/master/titanic">github</a>.</p>
<figure>

</figure>
<h3>Data munging</h3>
<p>The <a href="https://www.kaggle.com/c/titanic-gettingStarted/data">data set</a> provided by kaggle contains 1309 records of passengers aboard the ...</p> </div><!-- entry-content -->
</article>
<div class="pager">
      <ul>
                        <li class="previous disabled"><a>← Previous</a></li>
						<li class="next"><a href="https://synergenz.github.io/posts2.html">Next →</a></li>
      </ul>
    </div>
</section><!-- content -->
                </div>
            </div><!-- row-->
        </div><!-- container -->

        <!-- <div class="push"></div> -->
    </div> <!-- wrap -->

    <div class="container-fluid aw-footer">
		<div class="row-centered">
			<div class="col-sm-3 col-sm-offset-1">
				<h4>Author</h4>
				<ul class="list-unstyled my-list-style">
					<li><a href="http://www.ias-research.net/people/thomas-buhrmann/">Academic Home</a></li>
					<li><a href="http://github.com/synergenz">Github</a></li>
					<li><a href="http://www.linkedin.com/in/thomasbuhrmann">LinkedIn</a></li>
					<li><a href="https://secure.flickr.com/photos/syngnz/">Flickr</a></li>                            
				</ul>
			</div>
			<div class="col-sm-3">
				<h4>Categories</h4>
				<ul class="list-unstyled my-list-style">
					<li><a href="https://synergenz.github.io/category/academia.html">Academia (4)</a></li>
					<li><a href="https://synergenz.github.io/category/data-apps.html">Data Apps (2)</a></li>
					<li><a href="https://synergenz.github.io/category/data-posts.html">Data Posts (4)</a></li>
					<li><a href="https://synergenz.github.io/category/reports.html">Reports (3)</a></li>
				</ul>
			</div>
			<div class="col-sm-3">
				<h4>Tags</h4>
                <ul class="tagcloud">
                        <li class="tag-4"><a href="https://synergenz.github.io/tag/hadoop.html">hadoop</a></li>
                        <li class="tag-1"><a href="https://synergenz.github.io/tag/python.html">python</a></li>
                        <li class="tag-4"><a href="https://synergenz.github.io/tag/regression.html">regression</a></li>
                        <li class="tag-4"><a href="https://synergenz.github.io/tag/titanic.html">titanic</a></li>
                        <li class="tag-4"><a href="https://synergenz.github.io/tag/categorisation.html">categorisation</a></li>
                        <li class="tag-4"><a href="https://synergenz.github.io/tag/random-forest.html">random forest</a></li>
                        <li class="tag-1"><a href="https://synergenz.github.io/tag/report.html">report</a></li>
                        <li class="tag-2"><a href="https://synergenz.github.io/tag/graph.html">graph</a></li>
                        <li class="tag-4"><a href="https://synergenz.github.io/tag/scraping.html">scraping</a></li>
                        <li class="tag-4"><a href="https://synergenz.github.io/tag/sql.html">sql</a></li>
                        <li class="tag-1"><a href="https://synergenz.github.io/tag/d3.html">d3</a></li>
                        <li class="tag-4"><a href="https://synergenz.github.io/tag/neo4j.html">neo4j</a></li>
                        <li class="tag-4"><a href="https://synergenz.github.io/tag/lda.html">lda</a></li>
                        <li class="tag-1"><a href="https://synergenz.github.io/tag/smcs.html">smcs</a></li>
                        <li class="tag-4"><a href="https://synergenz.github.io/tag/nosql.html">nosql</a></li>
                        <li class="tag-4"><a href="https://synergenz.github.io/tag/java.html">java</a></li>
                        <li class="tag-1"><a href="https://synergenz.github.io/tag/r.html">R</a></li>
                        <li class="tag-4"><a href="https://synergenz.github.io/tag/kaggle.html">kaggle</a></li>
                        <li class="tag-1"><a href="https://synergenz.github.io/tag/visualization.html">visualization</a></li>
                        <li class="tag-4"><a href="https://synergenz.github.io/tag/big-data.html">big data</a></li>
                        <li class="tag-4"><a href="https://synergenz.github.io/tag/svm.html">svm</a></li>
                </ul>
			</div>
		</div>
    </div>
<!-- JavaScript -->
<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script type="text/javascript">
jQuery(document).ready(function($) 
{
	$("div.collapseheader").click(function () {
		$header = $(this).children("span").first();
		$codearea = $(this).children(".input_area");
		$codearea.slideToggle(500, function () {
			$header.text(function () {
				return $codearea.is(":visible") ? "Collapse Code" : "Expand Code";
			});
		});
	});


    // $(window).resize(function(){
    //     var footerHeight = $('.aw-footer').outerHeight();
    //     var stickFooterPush = $('.push').height(footerHeight);  
    //     $('.wrap').css({'marginBottom':'-' + footerHeight + 'px'});
    // });     

    // $(window).resize();

    // $(window).bind("load resize", function() {    
    //     var footerHeight = 0,
    //         footerTop = 0,
    //         $footer = $(".aw-footer");

    //     positionFooter();

    //     function positionFooter() {

    //         footerHeight = $footer.height();
    //         footerTop = ($(window).scrollTop()+$(window).height()-footerHeight)+"px";
    //         console.log(footerHeight, footerTop);
    //         console.log($(document.body).height()+footerHeight, $(window).height());

    //         if ( ($(document.body).height()+footerHeight) < $(window).height()) {
    //             $footer.css({ position: "absolute" }).css({ top: footerTop });
    //             console.log("Positioning absolute");
    //         }
    //         else {
    //             $footer.css({ position: "static" });
    //             console.log("Positioning static");
    //         }
    //     }

    //     $(window).scroll(positionFooter).resize(positionFooter);
    // });
});
</script>
</body>
</html>